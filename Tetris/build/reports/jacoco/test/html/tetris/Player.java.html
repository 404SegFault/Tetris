<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Player.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Demolition</a> &gt; <a href="index.source.html" class="el_package">demolition</a> &gt; <span class="el_source">Player.java</span></div><h1>Player.java</h1><pre class="source lang-java linenums">package demolition;
import processing.core.PImage;
import processing.core.PApplet;
import java.util.*;

public class Player extends MovingSprite{
	private Gamemap map;
	private int lives;

	public Player(PImage sprite, int x, int y, PImage[][] animations, int lives){
<span class="fc" id="L11">		super(sprite, x, y, animations);</span>
<span class="fc" id="L12">		this.lives = lives;</span>
<span class="fc" id="L13">		this.direction = Cardinal.DOWN;</span>
<span class="fc" id="L14">	} </span>

	/**depending on what arrow the user presses the player will move in that direction, while also checking the objects that are in that direction i.e. if there is a wall in the way it will not move, if there is an enemy it will deduct a life, if there is the goal it will load the next level**/
	public void movement(char key, int keyCode){
<span class="fc" id="L18">		int[] newCoords = this.getCoords().clone();</span>

<span class="fc bfc" id="L20" title="All 2 branches covered.">		if (key != ' '){</span>
<span class="pc bpc" id="L21" title="1 of 5 branches missed.">			switch (keyCode) {</span>
			
			case PApplet.UP:
<span class="fc" id="L24">				newCoords[1] -= App.GRIDSPACE;</span>
<span class="fc" id="L25">				this.setDirection(Cardinal.UP);</span>
<span class="fc" id="L26">				break;</span>
			
			case PApplet.DOWN:
<span class="fc" id="L29">				newCoords[1] += App.GRIDSPACE;</span>
<span class="fc" id="L30">				this.setDirection(Cardinal.DOWN);</span>
<span class="fc" id="L31">				break;</span>
			
			case PApplet.LEFT:
<span class="fc" id="L34">				newCoords[0] -= App.GRIDSPACE;</span>
<span class="fc" id="L35">				this.setDirection(Cardinal.LEFT);</span>
<span class="fc" id="L36">				break;</span>
			
			case PApplet.RIGHT:
<span class="fc" id="L39">				newCoords[0] += App.GRIDSPACE;</span>
<span class="fc" id="L40">				this.setDirection(Cardinal.RIGHT);</span>
				break;
			}


			// finds the object at the new coordinates the player wants to move 
<span class="fc" id="L46">			GameObject objectBeingCollided = map.findCollisionObject(this, newCoords);</span>

<span class="fc bfc" id="L48" title="All 2 branches covered.">			if (objectBeingCollided instanceof Wall){</span>
<span class="fc" id="L49">				return;</span>
			}
<span class="pc bpc" id="L51" title="1 of 4 branches missed.">			if (objectBeingCollided instanceof Enemy || objectBeingCollided instanceof Explosion){</span>
<span class="fc" id="L52">				map.playerHit();</span>
<span class="fc" id="L53">				return;</span>
			}

			// makes the coordinates where the player actually should be drawn 
<span class="fc" id="L57">			newCoords[1] -= App.GRIDSPACE;</span>
<span class="fc" id="L58">			this.setCoord(newCoords.clone());</span>

			// if the player is where the goal is then get the next level
<span class="fc bfc" id="L61" title="All 2 branches covered.">			if (Arrays.equals(this.getCoords(), map.getGoalCoordinates())){</span>
<span class="fc" id="L62">				map.loadNextLevel();</span>
			}
<span class="fc" id="L64">		}</span>

		else {
<span class="pc bpc" id="L67" title="1 of 2 branches missed.">			if (key == ' ') {</span>
<span class="fc" id="L68">				map.placeBomb();</span>
			} 
		}
<span class="fc" id="L71">	}</span>
	
	////////////////////////////////GETTERS AND SETTERS//////////////////////////
<span class="fc" id="L74">	public void minusLife(){this.lives -= 1;}</span>
<span class="fc" id="L75">	public int getLives(){return this.lives;}</span>

<span class="fc" id="L77">	public void setMap(Gamemap map){this.map = map;}</span>
<span class="fc" id="L78">	public void setDirection(Cardinal direction){this.direction = direction;}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>